import{d as y,Y as b,r as w,a3 as C,o as I,R as r,b as P,c as x,y as R,e as t,a4 as S,a5 as i,a6 as B,a7 as E,a8 as k,a9 as H,V as M,aa as N,F as d,ab as D,ac as F,H as T,ad as U,I as V,ae as L,C as $,af as A,ag as W,ah as Y,ai as q}from"./index-DOvsCgXx.js";const _=y(()=>{const c=b(),g=()=>({text:"",title:"",order:0,slug:"",subtitle:"",allowComment:!0,id:void 0,images:[],meta:void 0}),p=e=>A(a)(e),a=w(g()),s=C(()=>c.query.id);I(async()=>{const e=s.value;if(e&&typeof e=="string"){const o=(await r.api.pages(e).get({})).data;p(o)}});const n=P(!1),u=x(),m=R(),f=async()=>{const e=()=>{try{if(!a.title||a.title.trim().length==0)throw"标题为空";if(!a.slug)throw"路径为空";return{...q(a),title:a.title.trim(),slug:a.slug.trim()}}catch(l){throw u.error(l),l}};if(s.value){if(!W(s.value))return;const l=s.value;await r.api.pages(l).put({data:e()}),u.success("修改成功")}else await r.api.pages.post({data:e()}),u.success("发布成功");m.push({name:Y.ListPage,hash:"|publish"})};return()=>t($,{headerClass:"pt-1",actionsElement:t(d,null,[t(D,{data:a,onHandleYamlParsedMeta:e=>{const{title:l,slug:o,subtitle:v,...h}=e;a.title=l??a.title,a.slug=o??a.slug,a.subtitle=v??a.subtitle,a.meta={...h}}},null),t(F,{iframe:!0,data:a},null),t(T,{icon:t(U,null,null),onClick:f},null)]),footerButtonElement:t(d,null,[t("button",{onClick:()=>{n.value=!0}},[t(V,null,{default:()=>[t(L,null,null)]})])])},{default:()=>[t(S,{class:"relative z-10 mt-3",label:"与你有个好心情~",value:a.title,onChange:e=>{a.title=e}},null),t("div",{class:"pt-3 text-gray-700 dark:text-gray-300"},[t(i,{value:a.subtitle,onChange:e=>void(a.subtitle=e)},null)]),t("div",{class:"py-3 text-gray-500"},[t("label",null,[`${B}/`]),t(i,{value:a.slug,onChange:e=>void(a.slug=e)},null)]),t(E,null,{default:()=>[t(k,{key:a.id,loading:!!(s.value&&typeof a.id>"u"),onChange:e=>{a.text=e},text:a.text},null)]}),t(H,{disabledItem:["date-picker"],onUpdateShow:e=>{n.value=e},data:a,show:n.value},{default:()=>[t(M,{label:"页面顺序"},{default:()=>[t(N,{placeholder:"",value:a.order,onUpdateValue:e=>void(a.order=e??0)},null)]})]})]})});export{_ as default};
